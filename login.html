<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>بوابة الوصول | Ajar Respect</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --bg: #0f0a1e; --card: #1a142d; --accent: #a37cf0; --error: #ff4757; }
        body { background: var(--bg); color: white; font-family: 'Segoe UI', Tahoma, sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; overflow: hidden; }
        
        .auth-container { background: var(--card); padding: 40px; border-radius: 25px; border: 1px solid var(--accent); width: 90%; max-width: 420px; box-shadow: 0 15px 50px rgba(0,0,0,0.6); position: relative; animation: fadeIn 0.6s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }

        .close-btn { position: absolute; top: 20px; right: 20px; color: #8b83a3; text-decoration: none; font-size: 24px; transition: 0.3s; }
        .close-btn:hover { color: var(--accent); transform: rotate(90deg); }

        .logo-area { font-size: 32px; font-weight: bold; color: var(--accent); margin-bottom: 10px; letter-spacing: 2px; }
        h2 { margin-bottom: 25px; font-weight: 300; color: #ccc; }

        .input-group { position: relative; margin-bottom: 15px; text-align: right; }
        .input-group i { position: absolute; top: 15px; right: 15px; color: var(--accent); }
        input { width: 100%; padding: 12px 45px 12px 15px; background: #0b0716; border: 1px solid #332a4d; border-radius: 12px; color: white; font-size: 16px; box-sizing: border-box; transition: 0.3s; }
        input:focus { border-color: var(--accent); box-shadow: 0 0 10px rgba(163, 124, 240, 0.2); outline: none; }

        .main-btn { width: 100%; padding: 14px; background: var(--accent); border: none; border-radius: 12px; color: white; font-weight: bold; cursor: pointer; font-size: 16px; transition: 0.4s; margin-top: 10px; }
        .main-btn:hover { filter: brightness(1.2); transform: translateY(-2px); }

        .toggle-text { margin-top: 20px; font-size: 14px; color: #8b83a3; }
        .toggle-text span { color: var(--accent); cursor: pointer; font-weight: bold; text-decoration: underline; }
        
        #errorMsg { color: var(--error); font-size: 13px; margin-top: 10px; display: none; }
    </style>
</head>
<body>

    <div class="auth-container">
        <a href="index.html" class="close-btn">&times;</a>
        <div class="logo-area">AJAR RESPECT</div>
        <h2 id="title">تسجيل الدخول</h2>

        <div class="input-group">
            <i class="fa-solid fa-envelope"></i>
            <input type="email" id="email" placeholder="البريد الإلكتروني">
        </div>

        <div class="input-group">
            <i class="fa-solid fa-lock"></i>
            <input type="password" id="password" placeholder="كلمة المرور">
        </div>

        <div id="errorMsg">يرجى التحقق من البيانات المطلوبة</div>

        <button class="main-btn" onclick="processAuth()" id="submitBtn">دخول</button>

        <div class="toggle-text" id="toggleBox">
            ليس لديك حساب؟ <span onclick="toggleForm()">أنشئ حساباً الآن</span>
        </div>
    </div>

    <script>
        let isLoginMode = true;

        function toggleForm() {
            isLoginMode = !isLoginMode;
            document.getElementById('title').innerText = isLoginMode ? "تسجيل الدخول" : "إنشاء حساب جديد";
            document.getElementById('submitBtn').innerText = isLoginMode ? "دخول" : "تسجيل الحساب";
            document.getElementById('toggleBox').innerHTML = isLoginMode ? 
                `ليس لديك حساب؟ <span onclick="toggleForm()">أنشئ حساباً الآن</span>` : 
                `لديك حساب بالفعل؟ <span onclick="toggleForm()">سجل دخولك</span>`;
            document.getElementById('errorMsg').style.display = "none";
        }

        function processAuth() {
            const email = document.getElementById('email').value;
            const pass = document.getElementById('password').value;
            const error = document.getElementById('errorMsg');

            if (email.length < 5 || pass.length < 6) {
                error.innerText = "البريد غير صحيح أو كلمة المرور قصيرة جداً";
                error.style.display = "block";
                return;
            }

            // هنا يتم الربط مع Firebase مستقبلاً، حالياً نقوم بحفظ الجلسة محلياً بدقة
            localStorage.setItem('user_email', email);
            localStorage.setItem('is_logged_in', 'true');
            localStorage.setItem('user_id', 'u_' + Date.now()); // معرف فريد لكل شخص

            // إظهار رسالة نجاح جمالية
            document.getElementById('submitBtn').innerHTML = '<i class="fa-solid fa-circle-notch fa-spin"></i> جاري التحميل...';
            
            setTimeout(() => {
                alert(isLoginMode ? "مرحباً بك مجدداً في أجر ريسبكت" : "تم إنشاء حسابك بنجاح، أهلاً بك");
                window.location.href = "index.html";
            }, 1500);
        }
    </script>
</body>
</html>
